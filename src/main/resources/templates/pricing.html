<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>

<head>
<title>Free Gym Website Template | Pricing :: w3layouts</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="css/style.css" rel='stylesheet' type='text/css' />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800'
	rel='stylesheet' type='text/css'>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700'
	rel='stylesheet' type='text/css'>
<script type="application/x-javascript">	
	 addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } 
</script>
<script src="js/jquery.min.js"></script>
<!-- grid-slider -->
<script type="text/javascript" src="js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="js/jquery.contentcarousel.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<!-- //grid-slider -->
<!-- Add fancyBox main JS and CSS files -->
<script src="js/jquery.magnific-popup.js" type="text/javascript"></script>
<link href="css/magnific-popup.css" rel="stylesheet" type="text/css">
<script>
 	$(document).ready(function() {
 		$('.popup-with-zoom-anim').magnificPopup({
 			type : 'inline',
 			fixedContentPos : false,
 			fixedBgPos : true,
 			overflowY : 'auto',
 			closeBtnInside : true,
 			preloader : false,
 			midClick : true,
 			removalDelay : 300,
 			mainClass : 'my-mfp-zoom-in'
 		});
 	});
</script>
<style>
.about_gallery {
	background: #F3F3F3;
	padding: 4% 0;
}

[data-tooltip]:hover:before, [data-tooltip]:hover:after, [data-tooltip]:focus:before,
	[data-tooltip]:focus:after {
	visibility: visible;
	opacity: 1;
}


.about_banner_wrap {
	position: relative;
}

h1.m_11 {
	color: #FFF;
	background: #00BFF0;
	padding: 7px 50px;
	font-size: 2em;
	text-transform: uppercase;
	font-weight: 100;
	position: absolute;
	top: -48px;
	text-align: center;
	left: 14%;
	margin: 0;
}
h3.m_3 {
	color: #FFFFFF;
	text-align: center;
}

#img1 {
	width: 300px;
	height: 300px;
}

.button {
	line-height: 1.1em;
	font-size: 1.1em;
	color: #0c0c0c;
	text-decoration: none;
	margin: 3% 0;
	background-color: #F0F0F0;
	border: 1px solid #0c0c0c;
}

.button:hover {
	background-color: #0056b3;
}
.about_gallery{
    background: #00BFF0;
}
</style>

</head>

<body>
	<!-- start header_bottom -->
	<div class="header-bottom">
		<div class="container">
			<div class="header-bottom_left">
				<i class="phone"> </i><span>1-200-346-2986</span>
			</div>
			<div class="social">
				<ul>
					<li class="facebook"><a href="#"><span> </span></a></li>
					<li class="twitter"><a href="#"><span> </span></a></li>
					<li class="pinterest"><a href="#"><span> </span></a></li>
					<li class="google"><a href="#"><span> </span></a></li>
					<li class="tumblr"><a href="#"><span> </span></a></li>
					<li class="instagram"><a href="#"><span> </span></a></li>
					<li class="rss"><a href="#"><span> </span></a></li>
				</ul>
			</div>
			<div class="clear"></div>
		</div>
	</div>
	<!-- start menu -->
	<div class="menu">
		<div class="container">
			<div class="logo">
				<a href="index.html"><img src="images/logo.png" alt="" /></a>
			</div>
			<div class="h_menu4">
				<!-- start h_menu4 -->
				<a class="toggleMenu" href="#">Menu</a>
				<ul class="nav">
					<li><a th:href="@{/index}">Home</a></li>
					<li><a th:href="@{member/account_information}">會員專區</a></li>
					<li><a th:href="@{trainers}">專屬你的訓練</a></li>
					<li><a th:href="@{/menu}">健康餐</a></li>
					<li class="active"><a th:href="@{pricing}">購物商城</a></li>
					<li><a th:href="@{/map}">美食地圖</a></li>
					<li><a th:href="@{/qa}">客服</a></li>
					<li><a th:href="@{/logout}" class="logout-button">登出</a></li>
				</ul>
				<script type="text/javascript" src="js/nav.js"></script>
			</div>
			<!-- end h_menu4 -->
			<div class="clear"></div>
		</div>
	</div>
	<!-- end menu -->
	<!------------------⬇️以下為修改範圍⬇️------------------------>
	<div class="main">
		<div class="about_banner_img">
			<img src="images/price.jpg" class="img-responsive" alt="" />
		</div>
		<div class="about_banner_wrap">
			<h1 class="m_11">線上購物</h1>
		</div>
		<div class="border"></div>
		<div class="container">
			<div class="row price_plans">
			<h3 class="m_2">商品瀏覽</h3>
			<div class="price_plans_box">				
				
				<div th:if="${(productList != null) and !productList.empty}">
					<div class="col-md-4" th:each="productVO : ${productList}">
						<div class="card mb-4 shadow-sm">
							<img
								th:src="@{|/course/DBGifReader?picID=${productVO.productID}&source=productPic|}"
								class="card-img-top" alt="Product Image"
								style="height: 200px; object-fit: cover;">
							<div class="card-body">
								<div class="product" th:data-product-id="${productVO.productID}">
									<!-- <h5 class="card-title">產品名稱</h5> -->
									<h5 class="card-title" th:text="${productVO.prodName}">默認產品名稱</h5>
									
									<span class="card-text" th:text="${productVO.intro}">產品介紹</span>
									<div class="d-flex justify-content-between align-items-center">
										<span>價格</span>
										<small class="text-muted" th:text="${productVO.price}"></small>
									</div>
									<label for="quantity">數量:</label>
									<select name="quantity" th:id="'quantity-' + ${productVO.productID}">
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
										<option value="6">6</option>
										<option value="7">7</option>
										<option value="8">8</option>
										<option value="9">9</option>
										<option value="10">10</option>
									</select>
									<button class="add-to-cart" 
											th:attr="id=${productVO.productID}" 
											th:data-product-id="${productVO.productID}">加到購物車</button>
											<a th:href="@{/shoppingcart}" class="button">加到購物車測試</a>
								</div>
								
								
								<div>
								</div>
							</div>
						</div>
							
					</div>
				</div>
					<!-- product List is null -->
					<div
						th:if="${productList == null or productList.empty}">
						<p>目前沒有可用的產品。</p>
					</div>
			</div>

			<div class="clear"></div>
		</div>
	</div>
	</div>

		<ul class="price_question">
		<div class="container">
			<li class="question_left">
				<h4>解惑專區</h4>
				<p>如對於本網站商品有任何疑問，歡迎與我們聯絡！</p>
			</li>
			<!-- href要改成客服頁面 -->
			<li class="question_right"
				onclick="window.location.href='./product_intro.html'">(課服e-mail)</li>
			<div class="clear"></div>
		</div>
	</ul>
<!-- 	</div> -->
	<!------------------⬆️以上為修改範圍⬆️------------------------>
	<div class="footer-bottom">
		<div class="container">
			<div class="row section group">
				<div class="col-md-4">
					<h4 class="m_7">Newsletter Signup</h4>
					<p class="m_8">Lorem ipsum dolor sit amet, consectetuer
						adipiscing elit sed diam nonummy.</p>
					<form class="subscribe">
						<input type="text" value="Insert Email" onfocus="this.value = '';"
							onblur="if (this.value == '') {this.value = 'Insert Email';}">
					</form>
					<div class="subscribe1">
						<a href="#">Submit Email<i class="but_arrow"> </i></a>
					</div>
				</div>
				<div class="col-md-4">
					<div class="f-logo">
						<img src="images/logo.png" alt="" />
					</div>
					<p class="m_9">Lorem ipsum dolor sit amet, consectetuer
						adipiscing elit, sed diam nonummy nibh euismod tincidunt ut
						laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim
						veniam, quis</p>
					<p class="address">
						Phone : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="m_10">(00)
							222 666 444</span>
					</p>
					<p class="address">
						Email : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="m_10">info[at]mycompany.com</span>
					</p>
				</div>
				<div class="col-md-4">
					<ul class="list">
						<h4 class="m_7">Menu</h4>
						<li><a href="#">About</a></li>
						<li><a href="#">Trainers</a></li>
						<li><a href="#">Classes</a></li>
						<li><a href="#">Pricing</a></li>
						<li><a href="#">Privacy</a></li>
						<li><a href="#">Contact</a></li>
					</ul>
					<ul class="list1">
						<h4 class="m_7">Community</h4>
						<li><a href="#">Blog</a></li>
						<li><a href="#">Forum</a></li>
						<li><a href="#">Support</a></li>
						<li><a href="#">Newsletter</a></li>
					</ul>
				</div>
				<div class="clear"></div>
			</div>
		</div>
	</div>
	<div class="copyright">
		<div class="container">
			<div class="copy">
				<p>
					© 2014 Template by <a href="http://w3layouts.com" target="_blank">
						w3layouts</a>
				</p>
			</div>
			<div class="social">
				<ul>
					<li class="facebook"><a href="#"><span> </span></a></li>
					<li class="twitter"><a href="#"><span> </span></a></li>
					<li class="pinterest"><a href="#"><span> </span></a></li>
					<li class="google"><a href="#"><span> </span></a></li>
					<li class="tumblr"><a href="#"><span> </span></a></li>
					<li class="instagram"><a href="#"><span> </span></a></li>
					<li class="rss"><a href="#"><span> </span></a></li>
				</ul>
			</div>
			<div class="clear"></div>
		</div>
	</div>
	
	<script type="text/javascript">
// 	$(document).ready(function() {
// 		$('.add-to-cart').click(function() {
// 			// 从按钮的 data-product-id 属性中获取商品 ID
// 			const productId = $(this).data('product-id');
// 			// 从对应的选择框中获取数量
// 			const quantity = $(`#quantity-${productId}`).val();

// 			console.log('商品ID:', productId);
// 			console.log('數量:', quantity);

// 			// 发送 AJAX 请求
// 			$.ajax({
// 			    url: 'http://localhost:8080/redis/save',
// 			    type: 'POST',
// 			    contentType: 'application/json',
// 			    data: JSON.stringify({ id: productId, quantity: quantity }),
// 			    success: function(data) {
// 			        console.log('成功:', data);
// 			        // 可以在这里添加成功提示或处理响应
// 			    },
// 			    error: function(error) {
// 			        console.error('错误:', error);
// 			        // 处理错误
// 			    }
// 			});
// 		});
// 	});

    $(document).ready(function() {
	    $('.add-to-cart').click(function() {
	        // 从按钮的 data-product-id 属性中获取商品 ID
	        const productId = $(this).data('product-id');
	        
	        // 从对应的选择框中获取数量
	        const quantity = $(`#quantity-${productId}`).val();
	
	        // 查找父级 .product 容器，并获取 <h5> 和 <small> 标签内的文本
	        const productContainer = $(this).closest('.product');
	        let productName = productContainer.find('.card-title').text();
	        let productPrice = productContainer.find('.text-muted').text();
			const memberID = "1234";
				
			console.log('memberID:', memberID);
	        console.log('商品ID:', productId);
	        console.log('數量:', quantity);
	        console.log('商品名稱:', productName);
	        console.log('商品價格:', productPrice);
	
	        // 发送 AJAX 请求
	        $.ajax({
	            // url: 'http://localhost:8080/redis/save',
	            url: 'http://localhost:8080/redis/saveOrder',
	            type: 'POST',
	            contentType: 'application/json',
	            data: JSON.stringify({
					memberID: memberID,  // 請提供正確的 memberID
					productList: [
						{ id: productId, quantity: quantity, name: productName, price: productPrice }
					]
    			}),
	            success: function(data) {
	                console.log('成功:', data);
	                // 可以在这里添加成功提示或处理响应
	            },
	            error: function(error) {
	                console.error('错误:', error);
	                // 处理错误
	            }
	        });
	    });
	});

	</script>
	
	
	
</body>

</html>