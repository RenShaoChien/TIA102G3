<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Free Gym Website Template | Pricing :: w3layouts</title>
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" rel="stylesheet" type="text/css">
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <script th:src="@{/js/jquery.min.js}"></script>
    <!-- grid-slider -->
    <script type="text/javascript" th:src="@{/js/jquery.mousewheel.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.contentcarousel.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.easing.1.3.js}"></script>
    <!-- //grid-slider -->
    <!-- Add fancyBox main JS and CSS files -->
    <script th:src="@{/js/jquery.magnific-popup.js}" type="text/javascript"></script>
    <link th:href="@{/css/magnific-popup.css}" rel="stylesheet" type="text/css">

    <style>
        #commentform input[type="submit"]:hover {
            background: #555;
        }

        /*--自訂CSS--*/
        .price1 {
            background: #00bff0;
            text-align: left;
            padding: 5%;
        }

        div.ca-item {
            box-sizing: border-box;
            width: 300px;
            padding: 10px 10px 5px 10px;
            font-size: 1.5em;
        }

        div.dl_info,
        p.total_price {
            color: #000000;
            font-size: 1em;
            padding: 2px 10px;
            line-height: 1.5em;
        }

        .next_button {
            color: #000000;
        }

        .receiver {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
        }

        #info {
            font-size: 1.5em;
            color: #fff;
        }

        img {
            box-sizing: border-box;
            /* 設置box-sizing為border-box */
            width: 100%;
            /* 設置寬度為100% */
            max-width: 200px;
            /* 設置最大寬度 */
            height: auto;
            /* 高度自動，保持圖片比例 */
            padding: 0;
            /* 添加內邊距 */
        }

        table {
            border: 2px solid #fff;
            /* separate(預設) | collapse */
            border-collapse: collapse;
            table-layout: auto;
            margin: 5px;
        }

        table td,
        table th {
            border: 2px solid #fff;
            font-size: 1.5em;
            color: #fff;
            padding: 10px;
        }

        .about_banner_wrap {
            position: relative;
        }

        h1.m_11 {
            color: #FFF;
            background: #00BFF0;
            padding: 7px 50px;
            font-size: 2em;
            text-transform: uppercase;
            font-weight: 100;
            position: absolute;
            top: -48px;
            text-align: center;
            left: 14%;
            margin: 0;
        }
    </style>

</head>

<body>

<!-- start menu -->
<div class="menu">
    <div class="container">
        <div class="logo">
            <a th:href="@{/index}"><img th:src="@{/images/logo.png}" alt=""></a>
        </div>
        <div class="h_menu4"><!-- start h_menu4 -->
            <a class="toggleMenu" href="#">Menu</a>
            <ul class="nav">
                <li><a th:href="@{/index}">首頁</a></li>
                <li><a th:href="@{/account_information}">會員專區</a></li>
                <li class="active"><a th:href="@{/trainers}">專屬你的訓練</a></li>
                <li><a th:href="@{/menu}">健康餐</a></li>
                <li><a th:href="@{/pricing}">購物商城</a></li>
                <li><a th:href="@{/map}">美食地圖</a></li>
                <li><a th:href="@{/qa}">客服</a></li>
                <li><a th:href="@{/logout}" class="logout-button">登出</a></li>
            </ul>
            <script type="text/javascript" th:src="@{/js/nav.js}"></script>
        </div><!-- end h_menu4 -->
        <div class="clear"></div>
    </div>
</div>
<!-- end menu -->
<!------------------⬇️以下為修改範圍⬇️------------------------>
<div class="main">
    <div class="about_banner_img"><img th:src="@{/images/price.jpg}" class="img-responsive" alt=""></div>
    <div class="about_banner_wrap">
        <h1 class="m_11">線上購物</h1>
    </div>
    <div class="border"></div>
    <div class="container">
        <div class="row price_plans">
            <h3 class="m_2">課程訂單</h3>
            <form class="price1" th:action="@{/trainers/paying}" method="post" th:object="${courseOrder}">
                <!-- 訂單商品資訊 -->
                <hr>
                <span class="receiver">商品資訊</span>
                <hr>
                <table>
                    <tr>
                        <td class="abc">商品名稱</td>
                        <td>縮圖</td>
                        <td>數量</td>
                        <td>單價</td>
                        <td>小計</td>
                    </tr>
                    <tr id="productContent">
                        <td>好吃能量棒</td>
                        <td><img th:src="@{/images/protein.png}" alt=""></td>
                        <td>1</td>
                        <td>100元</td>
                        <td>100元</td>
                    </tr>
                </table>
                <p class="total_price">此次消費總計：100元</p>
                <hr>
                <!--宅配資訊 -->
                <span class="receiver">購買人資訊</span>
                <hr>

                <div class="dl_info">
                    <label for="receiver_name">姓名*：</label>
                    <input type="text" name="receiver" id="receiver_name" th:field="*{member.receiver}" required><br/>
                    <label for="receiver_addr">地址*：</label>
                    <input type="text" name="receiverAddress" id="receiver_addr" th:field="*{member.receiverAddress}" required><br/>
                    <label for="receiver_phone">電話*：</label>
                    <input type="text" name="receiverPhone" id="receiver_phone" th:field="*{member.receiverPhone}" required><br/>
                    <label for="receiver_email">信箱*：</label>
                    <input type="text" name="email" id="receiver_email"
                           th:value="${#strings.isEmpty(courseOrder.member.email) ? '' : courseOrder.member.email}" required><br/>

                    </label></label></label></label></label>
                </div>
<!--                <input type="submit" value="確認並前往付款">-->
                <input type="submit" th:disabled="${result}" th:value="${!result ? '您已購買過課程' : '確認並前往付款'}">
                <input type="hidden" th:field="*{member.memberID}">
                <input type="hidden" th:field="*{coachCourse.id}">
                <div class="price_plans_box">
                    <div class="clear"></div>
                </div>
            </form>
        </div>
        <div class="clear"></div>
    </div>
</div>

<!-- start footer -->
<div class="footer-bottom">
    <div class="container">
        <div class="row section group">
            <div class="col-md-4">
                <div class="social"
                     style="width: 100%; height: 100%; max-width: 200px; max-height: 200px; margin-right: 100px;">
                    <img th:src="@{/images/cutecatloge.png}" style="width: 100%; height: 100%"/>
                </div>
            </div>
            <div class="col-md-4">
                <div class="f-logo">
                    <h1>健肌尋食</h1>
                </div>
                <p class="m_9">
                    「健肌尋食」是一個簡單的概念，意思是通過運動來增強肌肉，同時尋找健康的食物來補充營養，這樣可以讓我們的身體更強壯，生活更健康愉快。</p>
                <p class="address">Phone : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="m_10">(02) 3333 4444</span>
                </p>
                <p class="address">Email : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="m_10">TIA102G3@Tibeme.com</span>
                </p>
            </div>
            <div class="col-md-4">
                <ul class="list">
                    <h4 class="m_7">關於我們</h4>
                    <li><a href="#">隱私權政策</a></li>
                    <li><a href="#">著作權聲明</a></li>
                    <li><a href="#">聯絡我們</a></li>
                </ul>
                <ul class="list1">
                    <h4 class="m_7">相關網站</h4>
                    <li><a href="https:/www.google.com">google</a></li>
                    <li><a href="https:/www.youtube.com">youtube</a></li>
                    <li><a href="#">Support</a></li>
                </ul>
            </div>
            <div class="clear"></div>
        </div>
    </div>
</div>
<div class="copyright">
    <div class="container">
        <div class="copy">
            <p>Copyright © 2024 健肌尋食 by TIA102G3</p>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script th:inline="javascript">

    var coachCourseID = /*[[${courseOrder.coachCourse.id}]]*/ '[[${courseOrder.coachCourse.id}]]';
    (function () {
        $(document).ready(function () {
            if (coachCourseID != null) {
                $.ajax({
                    url: '/trainers/orderCoachCourse.do',
                    method: 'POST',
                    data: {coachCourseID: coachCourseID},
                    success: function (data) {
                        console.log("Received data:", data);
                        if (data) {
                            $('#productContent').empty();
                            console.log(data)
                            var courseImageHtml = '';
                            if (data.coachCoursePics && data.coachCoursePics.length > 0) {
                                courseImageHtml = `<td><img src="/course/DBGifReader?picID=${data.coachCoursePics[0].id}&source=coachCourse" alt="Course Image"></td>`;
                            } else {
                                courseImageHtml = `<td><img src="/course/DBGifReader?picID=0&source=coachCourse" alt="Default Image"></td>`;
                            }
                            $('#productContent').append(`
                                 <td>${data.courseName}</td>
                                 ${courseImageHtml}
                                 <td>1</td>
                                 <td>${data.coursePrice}元</td>
                                 <td>${data.coursePrice}元</td>
                             `);
                            $('.total_price').empty();
                            $('.total_price').append(`
                                 剩下最後  ${data.maxCap - data.countMembers}  個名額了喔 !
                            `);
                            if (data.maxCap - data.countMembers == 0) {
                                $('input[type="submit"]').attr('disabled', true);
                                $('input[type="submit"]').val('已無名額');
                            } else {
                                // 確保按鈕在名額不為0時可點擊並顯示原名
                                $('input[type="submit"]').attr('disabled', false);
                                $('input[type="submit"]').val('確認並前往付款');
                            }
                        }
                    },
                    error: function (xhr, status, error) {
                        // 錯誤時的處理邏輯
                        console.error("AJAX Error: " + status + " - " + error);

                        // 顯示具體的錯誤信息
                        console.error("Response Text: " + xhr.responseText);
                        console.error("Status: " + xhr.status);
                        console.error("ReadyState: " + xhr.readyState);
                        console.error("TextStatus: " + status);

                        // 可以選擇顯示一個用戶友好的錯誤信息
                        alert("發生錯誤，請稍後再試！");
                    }
                });
            }
        });
    })();
</script>
</body>

</html>